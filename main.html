<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fear City Cycles - Queens NYC Custom Motorcycles</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Fix oversized product cards */
        .product-card {
            padding: 20px !important;
            margin-bottom: 0 !important;
        }
        
        .product-card img {
            width: 100%;
            height: 200px !important;
            object-fit: cover;
            margin-bottom: 15px;
        }
        
        .product-card h3 {
            font-size: 1.3em !important;
            margin-bottom: 10px !important;
        }
        
        .product-card p {
            font-size: 0.95em;
            margin-bottom: 15px !important;
        }
        
        .price {
            font-size: 1.3em !important;
            margin-bottom: 15px !important;
        }
        
        /* Product details inline functionality */
        .product-details {
            display: none;
            background: #111;
            border: 2px solid #8B0000;
            padding: 15px;
            margin-top: 10px;
            font-size: 0.9em;
        }
        
        .product-details.active {
            display: block;
        }
        
        .product-details h4 {
            color: #8B0000;
            margin: 0 0 10px 0;
            font-family: 'Orbitron', monospace;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 1em;
        }
        
        .product-details ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .product-details li {
            padding: 5px 0;
            border-bottom: 1px solid #333;
            color: #ccc;
            font-size: 0.85em;
        }
        
        .product-details li:last-child {
            border-bottom: none;
        }
        
        /* Remove hero background image */
        .hero {
            background: none !important;
        }
        
        /* Product buttons layout */
        .product-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .view-btn, .add-btn {
            padding: 10px 20px !important;
            font-size: 0.9em !important;
            font-family: var(--font-body);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            border: 2px solid;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
        }
        
        .add-btn {
            background: #333;
            color: white;
            border-color: #333;
        }
        
        .add-btn:hover {
            background: #555;
            border-color: #555;
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <nav>
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <img src="assets/images/fear-city-logo-small.jpg" alt="Fear City Cycles">
                <span class="logo-text">Fear City Cycles</span>
            </a>
            <ul class="nav-menu">
                <li><a href="#bikes">Bikes</a></li>
                <li><a href="#gear">Gear</a></li>
                <li><a href="culture.html">Culture</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="#contact">Contact</a></li>
                <li><a href="cart/" class="cart-link">Cart (<span id="cart-count">0</span>)</a></li>
            </ul>
            <div class="mobile-menu-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <section class="hero">
        <h1>Lean Mean Built in Queens</h1>
        <p>These aren't garage queens - they're street fighters.</p>
        <a href="#bikes" class="cta-btn">View Our Rides</a>
    </section>

    <section class="products" id="bikes">
        <h2>Custom Motorcycles</h2>
        <div class="product-grid">
            <!-- Motorcycles will be loaded dynamically from API -->
        </div>
    </section>

    <section class="products" id="gear">
        <h2>Gear & Apparel</h2>
        <div class="product-grid">
            <!-- Gear products will be loaded dynamically from API -->
        </div>
    </section>

    <section id="contact">
        <h2>Contact</h2>
        <p>Queens, NYC<br>
        Email: info@fearcitycycles.com<br>
        Phone: Call if you know</p>
    </section>

    <footer>
        <p>&copy; 2025 Fear City Cycles - Born in Queens. Built for Battle.</p>
    </footer>

    <script>
        // Nuclear inline cart functionality
        let cart = JSON.parse(localStorage.getItem('fearCityCart')) || [];
        
        function updateCartCount() {
            const count = cart.reduce((total, item) => total + item.quantity, 0);
            document.getElementById('cart-count').textContent = count;
        }
        
        function addToCart(name, price) {
            const existing = cart.find(item => item.name === name);
            if (existing) {
                existing.quantity += 1;
            } else {
                cart.push({ name: name, price: price, quantity: 1 });
            }
            localStorage.setItem('fearCityCart', JSON.stringify(cart));
            updateCartCount();
            alert(name + ' added to cart!');
        }
        
        function toggleDetails(button) {
            // Close all other open details first
            const allDetails = document.querySelectorAll('.product-details.active');
            allDetails.forEach(detail => {
                if (detail !== button.parentNode.nextElementSibling) {
                    detail.classList.remove('active');
                    const otherButton = detail.previousElementSibling.querySelector('.view-btn');
                    if (otherButton) otherButton.textContent = 'View Details';
                }
            });
            
            // Toggle current details
            const details = button.parentNode.nextElementSibling;
            if (details.classList.contains('active')) {
                details.classList.remove('active');
                button.textContent = 'View Details';
            } else {
                details.classList.add('active');
                button.textContent = 'Hide Details';
            }
        }
        
        // Mobile menu functionality
        const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
        const navMenu = document.querySelector('.nav-menu');
        
        if (mobileMenuToggle && navMenu) {
            mobileMenuToggle.addEventListener('click', function() {
                navMenu.classList.toggle('active');
                this.classList.toggle('active');
            });
        }
        
        // Close mobile menu when clicking on nav links
        const navLinks = document.querySelectorAll('.nav-menu a');
        navLinks.forEach(link => {
            link.addEventListener('click', function() {
                if (navMenu && navMenu.classList.contains('active')) {
                    navMenu.classList.remove('active');
                    if (mobileMenuToggle) mobileMenuToggle.classList.remove('active');
                }
            });
        });
        
        // Initialize on load
        updateCartCount();
    </script>
    
    <!-- API Integration and Main Scripts -->
    <script src="assets/js/api.js"></script>
    <script src="assets/js/main.js"></script>
    
    <!-- Product Loading for Main Page -->
    <script>
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('Loading products for main page...');
            
            try {
                // Import and initialize API
                const apiModule = await import('./assets/js/api.js');
                const fearCityAPI = new apiModule.FearCityAPI();
                
                // Load bikes
                console.log('Fetching motorcycles...');
                const bikesResponse = await fearCityAPI.fetchProducts({ category: 'motorcycles' });
                console.log('Bikes response:', bikesResponse);
                
                if (bikesResponse && bikesResponse.products) {
                    const bikesGrid = document.querySelector('#bikes .product-grid');
                    if (bikesGrid) {
                        bikesGrid.innerHTML = '';
                        bikesResponse.products.forEach(bike => {
                            const bikeCard = createProductCard(bike);
                            bikesGrid.appendChild(bikeCard);
                        });
                        console.log('Loaded', bikesResponse.products.length, 'bikes');
                    }
                }
                
                // Load gear
                console.log('Fetching gear...');
                const gearResponse = await fearCityAPI.fetchProducts({ category: 'gear' });
                console.log('Gear response:', gearResponse);
                
                if (gearResponse && gearResponse.products) {
                    const gearGrid = document.querySelector('#gear .product-grid');
                    if (gearGrid) {
                        gearGrid.innerHTML = '';
                        gearResponse.products.forEach(gear => {
                            const gearCard = createProductCard(gear);
                            gearGrid.appendChild(gearCard);
                        });
                        console.log('Loaded', gearResponse.products.length, 'gear items');
                    }
                }
                
            } catch (error) {
                console.error('Error loading products:', error);
            }
        });
        
        // Create product card HTML
        function createProductCard(product) {
            const card = document.createElement('div');
            card.className = 'product-card';
            card.innerHTML = `
                <img src="${product.images[0]}" alt="${product.name}" loading="lazy">
                <h3>${product.name}</h3>
                <p class="price">$${product.price.toLocaleString()}</p>
                <p>${product.description}</p>
                <div class="product-buttons">
                    <button class="view-btn" onclick="window.location.href='${product.category.slug}/${product.slug}.html'">View Details</button>
                    <button class="add-btn" onclick="window.fearCityCart && window.fearCityCart.addItem('${product.id}', '${product.name}', ${product.price}, '${product.images[0]}')">Add to Cart</button>
                </div>
            `;
            return card;
        }
    </script>
</body>
</html>