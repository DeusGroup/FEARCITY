<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fear City Cycles - Queens NYC Custom Motorcycles</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Scroll offset for sticky navbar */
        html {
            scroll-behavior: smooth;
        }
        
        /* Offset sections to account for sticky navbar */
        #bikes, #gear {
            scroll-margin-top: 100px; /* Increased offset for better visibility */
            padding-top: 80px;
            margin-top: 0; /* Remove negative margin that was causing overlap */
        }
        
        /* Ensure heading is visible */
        .products h2 {
            position: relative;
            z-index: 1;
        }
        
        /* Scroll to top button */
        .scroll-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: #8B0000;
            border: 2px solid #8B0000;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 999;
        }
        
        .scroll-to-top:hover {
            background: #cc0000;
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(139, 0, 0, 0.4);
        }
        
        .scroll-to-top.visible {
            opacity: 1;
            visibility: visible;
        }
        
        .scroll-to-top svg {
            width: 24px;
            height: 24px;
            fill: white;
        }
        
        @media (max-width: 768px) {
            .scroll-to-top {
                bottom: 20px;
                right: 20px;
                width: 45px;
                height: 45px;
            }
        }
        
        /* Product Grid Styles */
        .products {
            padding: 80px 20px 60px 20px; /* Restored full top padding to prevent overlap */
            background: #111;
            position: relative;
            z-index: 1;
        }
        
        .products h2 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 40px;
            color: #fff;
            text-transform: uppercase;
        }
        
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .product-card {
            background: #1a1a1a;
            border: 1px solid #333;
            overflow: hidden;
            transition: transform 0.3s ease;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            border-color: #8B0000;
        }
        
        .product-card img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            background: #333;
        }
        
        .product-info {
            padding: 20px;
        }
        
        .product-card h3 {
            font-size: 1.3rem;
            color: #fff;
            margin-bottom: 10px;
        }
        
        .product-card p {
            color: #ccc;
            font-size: 0.95rem;
            margin-bottom: 15px;
        }
        
        .product-card .price {
            font-size: 1.5rem;
            color: #8B0000;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .product-card button {
            width: 100%;
            padding: 15px;
            background: #8B0000;
            color: white;
            border: none;
            font-weight: 600;
            text-transform: uppercase;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .product-card button:hover {
            background: #cc0000;
        }
        
        
        /* Simple Hero - No Movie */
        .hero {
            background: linear-gradient(rgba(0,0,0,0.6), rgba(139,0,0,0.3)), url('assets/images/hero-bg.jpg') center/cover;
            min-height: 60vh;
            display: flex;
            align-items: center;
            position: relative;
            background-attachment: fixed;
            background-position: center center;
            background-repeat: no-repeat;
            background-size: cover;
        }
        
        .hero-content {
            position: absolute;
            right: 25%; /* Position at 3/4 to the right (25% from right edge) */
            top: 50%; /* Center vertically */
            transform: translateY(-50%); /* Perfect vertical centering */
            color: white;
            max-width: 800px;
            padding: 0 20px;
            text-align: left; /* Left align text on all devices */
        }
        
        
        .hero-content h1 {
            font-size: 3.5rem;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            margin-bottom: 20px;
            line-height: 1.2;
            text-transform: uppercase;
        }
        
        .hero-content p {
            font-size: 1.3rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
            margin-bottom: 30px;
        }
        
        .cta-btn {
            display: inline-block;
            background: rgba(255, 255, 255, 0.1); /* More transparent */
            backdrop-filter: blur(8px); /* Less blur for subtlety */
            -webkit-backdrop-filter: blur(8px); /* Safari support */
            color: white;
            padding: 16px 35px; /* Smaller padding */
            text-decoration: none;
            font-weight: 600; /* Slightly less bold */
            text-transform: uppercase;
            letter-spacing: 3px; /* Entrance page style */
            border: 2px solid #8B0000; /* Neon red border like entrance */
            border-radius: 4px; /* Smaller radius */
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94); /* Entrance page timing */
            font-size: 1rem; /* Smaller font */
            margin-top: 80px; /* 4cm lower (approximately 80px) */
            box-shadow: 
                0 0 3px rgba(139, 0, 0, 0.25), /* Lighter glow */
                0 0 6px rgba(139, 0, 0, 0.15), /* Softer glow */
                0 4px 15px rgba(0, 0, 0, 0.3); /* Keep depth shadow */
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
        }
        
        .cta-btn:hover {
            color: #ffffff;
            transform: translateY(-3px);
            border-color: #cc0000; /* Brighter red border on hover */
            background: rgba(139, 0, 0, 0.2); /* Subtle red background */
            box-shadow: 
                0 0 4px rgba(204, 0, 0, 0.3), /* Lighter hover glow */
                0 0 8px rgba(204, 0, 0, 0.2), /* Softer hover glow */
                0 0 12px rgba(139, 0, 0, 0.15), /* Subtle outer glow */
                0 8px 25px rgba(139, 0, 0, 0.3); /* Reduced depth shadow */
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }
        
        /* Mobile hover adjustments */
        @media (max-width: 768px) {
            .cta-btn:hover {
                transform: translateX(-50%) translateY(-2px); /* Maintain centering + lift */
            }
        }
        
        @media (max-width: 768px) {
            .hero {
                background-attachment: scroll; /* Better performance on mobile */
                background-position: center center;
                min-height: 50vh; /* Slightly shorter on mobile */
                background-size: cover;
                /* Ensure the focal point of the image is visible */
                background-position: 50% 50%;
            }
            
            .hero-content {
                right: 15%; /* Closer to center on mobile for better readability */
                top: 45%; /* Move text higher on mobile too */
                transform: translateY(-50%); /* Maintain vertical centering */
            }
            
            .hero-content h1 {
                font-size: 2.5rem;
                line-height: 1.1;
            }
            
            .hero-content p {
                font-size: 1.1rem;
            }
            
            .cta-btn {
                padding: 18px 40px; /* Entrance page mobile size */
                font-size: 1.0rem;
                letter-spacing: 3px; /* Entrance page mobile spacing */
                /* Position button higher so it's fully visible */
                position: absolute;
                bottom: 15vh; /* More spacing from bottom to ensure full visibility */
                left: 50%;
                transform: translateX(-50%); /* Center horizontally */
                margin-top: 0; /* Remove margin since using absolute positioning */
                box-shadow: 
                    0 0 2px rgba(139, 0, 0, 0.2), /* Lighter glow */
                    0 0 4px rgba(139, 0, 0, 0.1), /* Softer glow */
                    0 3px 12px rgba(0, 0, 0, 0.3);
            }
        }
        
        /* iPhone specific adjustments */
        @media (max-width: 430px) {
            .hero {
                min-height: 100vh; /* Full screen height on iPhone */
                height: 100vh;
                /* Adjust gradient for better text contrast on smaller screens */
                background: linear-gradient(rgba(0,0,0,0.7), rgba(139,0,0,0.4)), url('assets/images/hero-bg.jpg') center/cover;
            }
            
            .hero-content {
                padding: 0 20px;
                max-width: 90%;
                /* Position text higher, button lower for better spacing */
                position: absolute;
                right: 10%; /* Keep closer to right edge like before */
                top: 40%; /* Move text higher (quarter page up from center) */
                transform: translateY(-50%); /* Only vertical centering */
                text-align: left; /* Restore left alignment for L and B */
                width: auto; /* Let content determine width */
            }
            
            .hero-content h1 {
                font-size: 2.8rem; /* Slightly smaller to ensure "Built in Queens" fits */
                line-height: 1.1;
                margin-bottom: 30px;
                font-weight: 800;
                letter-spacing: 1px; /* Reduced letter spacing for better fit */
                white-space: nowrap; /* Prevent text wrapping */
            }
            
            .cta-btn {
                padding: 16px 35px; /* Exact entrance page iPhone size */
                font-size: 0.95rem; /* Exact entrance page iPhone size */
                font-weight: 500; /* Match entrance page weight */
                letter-spacing: 2px; /* Exact entrance page iPhone spacing */
                /* Absolute position at bottom of hero section */
                position: absolute;
                bottom: 15vh; /* Increased spacing to match mobile rule for full visibility */
                left: 50%;
                transform: translateX(-50%); /* Perfect center */
                margin-top: 0; /* Remove margin */
                box-shadow: 
                    0 0 2px rgba(139, 0, 0, 0.2), /* Lighter glow */
                    0 0 4px rgba(139, 0, 0, 0.12), /* Softer glow */
                    0 5px 20px rgba(0, 0, 0, 0.35);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
            }
        }
        
    </style>
</head>
<body>
    <nav>
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <img src="assets/images/fear-city-logo-small.jpg" alt="Fear City Cycles">
                <span class="logo-text">Fear City Cycles</span>
            </a>
            <ul class="nav-menu">
                <li><a href="#bikes">Bikes</a></li>
                <li><a href="#gear">Gear</a></li>
                <li><a href="culture.html">Culture</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li><a href="cart/" class="cart-link">Cart (<span id="cart-count">0</span>)</a></li>
            </ul>
            <div class="mobile-menu-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <section class="hero">
        <div class="hero-content">
            <h1>Lean Mean<br>Built in Queens</h1>
        </div>
        <a href="#bikes" class="cta-btn">View Our Rides</a>
    </section>

    <section class="products" id="bikes">
        <h2>Custom Motorcycles</h2>
        <div class="product-grid">
            <!-- Street Reaper -->
            <div class="product-card">
                <img src="assets/images/bike-street-reaper.jpg" alt="Street Reaper">
                <div class="product-info">
                    <h3>Street Reaper</h3>
                    <p>Pure aggression on two wheels. Stripped-down street fighter built for NYC streets.</p>
                    <div class="price">$24,500</div>
                    <button onclick="addToCart('street-reaper', 'Street Reaper', 24500)">Add to Cart</button>
                </div>
            </div>
            
            <!-- Borough Bruiser -->
            <div class="product-card">
                <img src="assets/images/bike-borough-bruiser.jpg" alt="Borough Bruiser">
                <div class="product-info">
                    <h3>Borough Bruiser</h3>
                    <p>Heavy-duty cruiser with chrome attitude. Built to dominate the boroughs.</p>
                    <div class="price">$28,000</div>
                    <button onclick="addToCart('borough-bruiser', 'Borough Bruiser', 28000)">Add to Cart</button>
                </div>
            </div>
            
            <!-- Fear Fighter -->
            <div class="product-card">
                <img src="assets/images/bike-fear-fighter.jpg" alt="Fear Fighter">
                <div class="product-info">
                    <h3>Fear Fighter</h3>
                    <p>Track-inspired machine with carbon details and performance engineering.</p>
                    <div class="price">$32,000</div>
                    <button onclick="addToCart('fear-fighter', 'Fear Fighter', 32000)">Add to Cart</button>
                </div>
            </div>
            
            <!-- Queens Crusher -->
            <div class="product-card">
                <img src="assets/images/bike-queens-crusher.jpg" alt="Queens Crusher">
                <div class="product-info">
                    <h3>Queens Crusher</h3>
                    <p>Vintage-inspired bobber built for the streets of Queens.</p>
                    <div class="price">$22,000</div>
                    <button onclick="addToCart('queens-crusher', 'Queens Crusher', 22000)">Add to Cart</button>
                </div>
            </div>
            
            <!-- Death Rider -->
            <div class="product-card">
                <img src="assets/images/bike-death-rider.jpg" alt="Death Rider">
                <div class="product-info">
                    <h3>Death Rider</h3>
                    <p>Classic chopper with extended fork and authentic style.</p>
                    <div class="price">$26,500</div>
                    <button onclick="addToCart('death-rider', 'Death Rider', 26500)">Add to Cart</button>
                </div>
            </div>
            
            <!-- Midnight Racer -->
            <div class="product-card">
                <img src="assets/images/bike-midnight-racer.jpg" alt="Midnight Racer">
                <div class="product-info">
                    <h3>Midnight Racer</h3>
                    <p>Performance-tuned café racer for midnight runs.</p>
                    <div class="price">$25,500</div>
                    <button onclick="addToCart('midnight-racer', 'Midnight Racer', 25500)">Add to Cart</button>
                </div>
            </div>
        </div>
    </section>

    <section class="products" id="gear">
        <h2>Gear & Apparel</h2>
        <div class="product-grid">
            <!-- Fear City Jacket -->
            <div class="product-card">
                <img src="assets/images/jacket-fear-city.jpg" alt="Fear City Jacket">
                <div class="product-info">
                    <h3>Fear City Leather Jacket</h3>
                    <p>Premium leather jacket with armor plating for street protection.</p>
                    <div class="price">$395</div>
                    <button onclick="addToCart('fear-jacket', 'Fear City Leather Jacket', 395)">Add to Cart</button>
                </div>
            </div>
            
            <!-- Queens Skull Tee -->
            <div class="product-card">
                <img src="assets/images/tee-queens-skull.jpg" alt="Queens Skull Tee">
                <div class="product-info">
                    <h3>Queens Skull Tee</h3>
                    <p>Premium cotton tee with Queens skull design.</p>
                    <div class="price">$35</div>
                    <button onclick="addToCart('queens-tee', 'Queens Skull Tee', 35)">Add to Cart</button>
                </div>
            </div>
            
            <!-- Reaper Riding Gloves -->
            <div class="product-card">
                <img src="assets/images/gloves-reaper-riding.jpg" alt="Reaper Riding Gloves">
                <div class="product-info">
                    <h3>Reaper Riding Gloves</h3>
                    <p>Reinforced leather gloves for maximum grip and protection.</p>
                    <div class="price">$89</div>
                    <button onclick="addToCart('reaper-gloves', 'Reaper Riding Gloves', 89)">Add to Cart</button>
                </div>
            </div>
            
            <!-- Fear City Patch -->
            <div class="product-card">
                <img src="assets/images/patch-fear-city.jpg" alt="Fear City Patch">
                <div class="product-info">
                    <h3>Fear City Patch</h3>
                    <p>Embroidered Fear City patch - show your NYC pride.</p>
                    <div class="price">$15</div>
                    <button onclick="addToCart('fear-patch', 'Fear City Patch', 15)">Add to Cart</button>
                </div>
            </div>
            
            <!-- Prospect Vest -->
            <div class="product-card">
                <img src="assets/images/vest-prospect.jpg" alt="Prospect Vest">
                <div class="product-info">
                    <h3>Prospect Vest</h3>
                    <p>Heavy denim vest, reinforced and cut-ready.</p>
                    <div class="price">$85</div>
                    <button onclick="addToCart('prospect-vest', 'Prospect Vest', 85)">Add to Cart</button>
                </div>
            </div>
            
            <!-- Skull Keychain -->
            <div class="product-card">
                <img src="assets/images/keychain-skull.jpg" alt="Skull Keychain">
                <div class="product-info">
                    <h3>Skull Keychain</h3>
                    <p>Pewter cast skull keychain with heavy-duty ring.</p>
                    <div class="price">$25</div>
                    <button onclick="addToCart('skull-keychain', 'Skull Keychain', 25)">Add to Cart</button>
                </div>
            </div>
        </div>
    </section>


    <footer>
        <p>&copy; 2025 Fear City Cycles</p>
    </footer>
    
    <!-- Scroll to top button -->
    <button class="scroll-to-top" id="scrollToTop" aria-label="Scroll to top">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/>
        </svg>
    </button>

    <!-- Emergency cart conflict prevention -->
    <script>
        // Execute immediately to prevent cart conflicts
        window.addEventListener('error', function(e) {
            if (e.message && e.message.includes('redeclaration of let cart')) {
                console.log('INTERCEPTED: Cart redeclaration error prevented');
                e.preventDefault();
                e.stopPropagation();
                return false;
            }
        });
        
        // Override any existing cart declarations
        try {
            Object.defineProperty(window, 'cart', {
                configurable: true,
                set: function(value) {
                    console.log('Cart assignment intercepted');
                    this._cart = value;
                },
                get: function() {
                    return this._cart;
                }
            });
        } catch (e) {
            console.log('Cart property override failed:', e);
        }
    </script>
    
    <script>
        // Force clear service worker cache to remove main.js
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then(function(registrations) {
                for(let registration of registrations) {
                    registration.unregister();
                    console.log('Service worker unregistered');
                }
            });
            
            // Clear all caches
            if ('caches' in window) {
                caches.keys().then(function(names) {
                    names.forEach(function(name) {
                        caches.delete(name);
                        console.log('Cache deleted:', name);
                    });
                });
            }
        }
        
        // Aggressively block any attempt to load main.js
        const originalCreateElement = document.createElement;
        document.createElement = function(tagName) {
            const element = originalCreateElement.call(this, tagName);
            if (tagName.toLowerCase() === 'script') {
                const originalSetAttribute = element.setAttribute;
                element.setAttribute = function(name, value) {
                    if (name === 'src' && value && value.includes('main.js')) {
                        console.log('BLOCKED: Attempt to load main.js via createElement');
                        return;
                    }
                    return originalSetAttribute.call(this, name, value);
                };
            }
            return element;
        };
        
        // Block existing script attempts
        const observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                mutation.addedNodes.forEach(function(node) {
                    if (node.tagName === 'SCRIPT' && node.src && node.src.includes('main.js')) {
                        console.log('BLOCKED: main.js script tag removed');
                        node.remove();
                    }
                });
            });
        });
        observer.observe(document.head, { childList: true });
        observer.observe(document.body, { childList: true });
        
        // Remove any existing main.js scripts
        document.querySelectorAll('script[src*="main.js"]').forEach(script => {
            console.log('REMOVED: Existing main.js script');
            script.remove();
        });
        
        (function() {
        // Prevent cart variable conflicts
        try {
            if (typeof cart !== 'undefined') {
                // Rename existing cart to avoid conflicts
                window.oldCart = cart;
                delete window.cart;
            }
        } catch (e) {
            // Ignore any errors from cart access
        }
        
        // Debug: Check for script conflicts
        console.log('Main.html inline script loading...');
        console.log('Cart conflict prevention applied');
        
        // Cart functionality is handled by ShoppingCart class in main.js
        function updateCartCount() {
            if (window.fearCityCart) {
                const count = window.fearCityCart.getItemCount();
                document.getElementById('cart-count').textContent = count;
            }
        }
        
        // Mobile menu functionality
        const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
        const navMenu = document.querySelector('.nav-menu');
        
        if (mobileMenuToggle && navMenu) {
            mobileMenuToggle.addEventListener('click', function() {
                navMenu.classList.toggle('active');
                this.classList.toggle('active');
            });
        }
        
        // Close mobile menu when clicking on nav links (only for anchor links, not external pages)
        const navLinks = document.querySelectorAll('.nav-menu a');
        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                // Only handle mobile menu closing for internal anchor links (#bikes, #gear)
                // Don't interfere with external pages (contact.html, culture.html, etc.)
                const href = this.getAttribute('href');
                
                if (href && href.startsWith('#')) {
                    // This is an anchor link - safe to handle mobile menu closing
                    if (navMenu && navMenu.classList.contains('active')) {
                        navMenu.classList.remove('active');
                        if (mobileMenuToggle) mobileMenuToggle.classList.remove('active');
                    }
                } else {
                    // This is an external link - only close menu if mobile menu is open, but don't delay
                    if (navMenu && navMenu.classList.contains('active')) {
                        navMenu.classList.remove('active');
                        if (mobileMenuToggle) mobileMenuToggle.classList.remove('active');
                    }
                    // Let the browser handle navigation immediately
                }
            });
        });
        
        // Simple cart functionality (replacing main.js to avoid conflicts)
        window.fearCityCart = {
            items: JSON.parse(localStorage.getItem('fearCityCart')) || [],
            
            addItem: function(product) {
                const existing = this.items.find(item => item.id === product.id);
                if (existing) {
                    existing.quantity += 1;
                } else {
                    this.items.push({
                        id: product.id,
                        name: product.name,
                        price: product.price,
                        image: product.image,
                        quantity: 1
                    });
                }
                this.saveCart();
                this.updateDisplay();
                alert(product.name + ' added to cart!');
            },
            
            getItemCount: function() {
                return this.items.reduce((count, item) => count + item.quantity, 0);
            },
            
            saveCart: function() {
                localStorage.setItem('fearCityCart', JSON.stringify(this.items));
            },
            
            updateDisplay: function() {
                const count = this.getItemCount();
                document.getElementById('cart-count').textContent = count;
            }
        };
        
        // Initialize cart display
        setTimeout(() => {
            updateCartCount();
            if (window.fearCityCart) {
                window.fearCityCart.updateDisplay();
            }
        }, 100);
        
        })(); // End of IIFE
    </script>
    
    <!-- Restore API functionality with cache busting -->
    <script src="assets/js/api.js?v=recovery-20250705" defer></script>
    
    <!-- Inline Hero Movie and Product Loading -->
    <script>
        
        // Enhanced cart functionality with API integration
        function addToCart(id, name, price) {
            if (window.fearCityCart) {
                window.fearCityCart.addItem({ id, name, price });
            }
        }
        
        // Progressive enhancement: API loading with hardcoded fallback
        async function loadProductsWithAPI() {
            console.log('🚀 Starting progressive product loading...');
            
            try {
                // Wait for API to be available
                if (typeof window.fearCityAPI === 'undefined') {
                    console.log('⚠️ API not available, using hardcoded fallback');
                    return false;
                }
                
                console.log('✅ API available, loading dynamic products');
                
                // Load motorcycles
                const bikesResponse = await window.fearCityAPI.fetchProducts({ category: 'motorcycles' });
                if (bikesResponse && bikesResponse.products && bikesResponse.products.length > 0) {
                    console.log(`🏍️ Loaded ${bikesResponse.products.length} motorcycles from API`);
                    renderApiProducts('bikes', bikesResponse.products);
                } else {
                    console.log('⚠️ No motorcycles from API, keeping hardcoded');
                }
                
                // Load gear
                const gearResponse = await window.fearCityAPI.fetchProducts({ category: 'gear' });
                if (gearResponse && gearResponse.products && gearResponse.products.length > 0) {
                    console.log(`🧥 Loaded ${gearResponse.products.length} gear items from API`);
                    renderApiProducts('gear', gearResponse.products);
                } else {
                    console.log('⚠️ No gear from API, keeping hardcoded');
                }
                
                console.log('✨ API product loading complete');
                return true;
                
            } catch (error) {
                console.log('❌ API loading failed, using hardcoded fallback:', error.message);
                return false;
            }
        }
        
        // Render products from API data
        function renderApiProducts(category, products) {
            const grid = document.querySelector(`#${category} .product-grid`);
            if (!grid) {
                console.log(`❌ Grid not found for category: ${category}`);
                return;
            }
            
            // Clear existing hardcoded content
            grid.innerHTML = '';
            
            // Render API products
            products.forEach(product => {
                const card = createApiProductCard(product);
                grid.appendChild(card);
            });
            
            console.log(`✅ Rendered ${products.length} products in ${category} section`);
        }
        
        // Create product card from API data
        function createApiProductCard(product) {
            const card = document.createElement('div');
            card.className = 'product-card';
            
            // Use API data structure
            const image = product.images && product.images[0] ? product.images[0] : 'assets/images/placeholder.jpg';
            const price = typeof product.price === 'number' ? product.price : 0;
            
            card.innerHTML = `
                <img src="${image}" alt="${product.name}" loading="lazy">
                <div class="product-info">
                    <h3>${product.name}</h3>
                    <p>${product.description}</p>
                    <div class="price">$${price.toLocaleString()}</div>
                    <button onclick="addToCart('${product.id}', '${product.name}', ${price})">
                        Add to Cart
                    </button>
                </div>
            `;
            
            return card;
        }
        
        // Initialize with progressive enhancement
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('🚀 Page loaded - starting progressive enhancement');
            
            // Try API loading after a short delay to ensure scripts are loaded
            setTimeout(async () => {
                const apiLoaded = await loadProductsWithAPI();
                if (apiLoaded) {
                    console.log('✨ Site running with full API functionality');
                } else {
                    console.log('🛡️ Site running with hardcoded fallback (still fully functional)');
                }
            }, 500);
            
            // Scroll to top functionality
            const scrollToTopBtn = document.getElementById('scrollToTop');
            
            // Show/hide scroll to top button based on scroll position
            window.addEventListener('scroll', function() {
                if (window.pageYOffset > 300) {
                    scrollToTopBtn.classList.add('visible');
                } else {
                    scrollToTopBtn.classList.remove('visible');
                }
            });
            
            // Scroll to top when button is clicked
            scrollToTopBtn.addEventListener('click', function() {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        });
        
        
    </script>
</body>
</html>